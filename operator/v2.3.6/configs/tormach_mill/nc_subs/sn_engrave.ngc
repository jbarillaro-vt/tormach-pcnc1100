o<sn_engrave> sub
#<_current_engraving_sn> = 123
#<xScale> = 1.5
#<yScale> = 2
#<xOffset> = 0.3

; generate the number 0...
o1000 sub
G90 G0 X[#1+[#3*.0521]] Y[#2+[#4*.0606]]
G0 Z.02
M8
G1 Z-.01 F2. 
X[#1+[#3*.0384]] Y[#2+[#4*.0769]] F30.
Y[#2+[#4*.2193]]
X[#1+[#3*.0750]] Y[#2+[#4*.2609]]
X[#1+[#3*.1434]] 
X[#1+[#3*.1679]] Y[#2+[#4*.2353]]
X[#1+[#3*.1835]] Y[#2+[#4*.2588]] 
X[#1+[#3*.0364]] Y[#2+[#4*.0368]] 
X[#1+[#3*.0521]] Y[#2+[#4*.0606]] 
X[#1+[#3*.0719]] Y[#2+[#4*.0369]] 
X[#1+[#3*.1471]] 
X[#1+[#3*.1833]] Y[#2+[#4*.0769]] 
Y[#2+[#4*.2192]] 
X[#1+[#3*.1679]] Y[#2+[#4*.2353]] 
G0 Z.1 
o1000 endsub

o1001 sub
G90 G0 X[#1+[#3*.075]] Y[#2+[#4*.0375]]
G0 Z.02
M8
G1 Z-.01 F2. 
X[#1+[#3*.1435]] F30.
X[#1+[#3*.1093]] 
Y[#2+[#4*.2609]] 
X[#1+[#3*.0773]] Y[#2+[#4*.2328]] 
G0 Z.1
o1001 endsub

; generate the number 2...
o1002 sub
G90 G0 X[#1] Y[#2]
G0 Z.02
G0 X[#1+[#3*.039]] Y[#2+[#4*.2316]]
G1 Z-.01 F2.
X[#1+[#3*.0715]] Y[#2+[#4*.2609]] F30.
X[#1+[#3*.1512]]
X[#1+[#3*.1854]] Y[#2+[#4*.2307]]
X[#1+[#3*.1851]] Y[#2+[#4*.1950]]
X[#1+[#3*.0335]] Y[#2+[#4*.0763]]
Y[#2+[#4*.0375]]
X[#1+[#3*.1836]]
G0 Z.1
o1002 endsub

; generate the number 3...
o1003 sub
G90 G0 X[#1] Y[#2]
G0 Z.02
G0 X[#1+[#3*.039]] Y[#2+[#4*.2316]]
G1 Z-.01 F2.
X[#1+[#3*.0741]] Y[#2+[#4*.2609]] F30.
X[#1+[#3*.1423]] 
X[#1+[#3*.1756]] Y[#2+[#4*.2252]] 
Y[#2+[#4*.1899]] 
X[#1+[#3*.1404]] Y[#2+[#4*.1565]] 
X[#1+[#3*.0842]] 
X[#1+[#3*.1404]] 
X[#1+[#3*.1828]] Y[#2+[#4*.1124]] 
Y[#2+[#4*.0714]] 
X[#1+[#3*.1467]] Y[#2+[#4*.0375]] 
X[#1+[#3*.0718]] 
X[#1+[#3*.0384]] Y[#2+[#4*.0709]] 
G0 Z.1
o1003 endsub

; generate the number 4...
o1004 sub
G90 G0 X[#1+[#3*.1435]] Y[#2+[#4*.0375]]
G0 Z.02
M8
G1 Z-.01 F2. 
Y[#2+[#4*.2609]] F30.
X[#1+[#3*.0375]] Y[#2+[#4*.1173]] 
X[#1+[#3*.1827]]
G0 Z.1
o1004 endsub

; generate the number 5...
o1005 sub
G90 G0 X[#1+[#3*.1814]] Y[#2+[#4*.2609]]
G0 Z.02
M8
G1 Z-.01 F2. 
X[#1+[#3*.0344]] F30.
X[#1+[#3*.0341]] Y[#2+[#4*.1452]] 
X[#1+[#3*.0712]] Y[#2+[#4*.184]]
X[#1+[#3*.1454]] Y[#2+[#4*.1839]] 
X[#1+[#3*.1833]] Y[#2+[#4*.1486]] 
X[#1+[#3*.1839]] Y[#2+[#4*.07]] 
X[#1+[#3*.1470]] Y[#2+[#4*.0375]]
X[#1+[#3*.0708]] 
X[#1+[#3*.0382]] Y[#2+[#4*.0691]] 
G0 Z.1
o1005 endsub

; generate the number 6...
o1006 sub
G90 G0 X[#1+[#3*.1733]] Y[#2+[#4*.2321]]
G0 Z.02
M8
G1 Z-.01 F2. 
X[#1+[#3*.1436]] Y[#2+[#4*.2609]] F30.
X[#1+[#3*.0685]] 
X[#1+[#3*.0346]] Y[#2+[#4*.1958]] 
Y[#2+[#4*.0664]] 
X[#1+[#3*.0640]] Y[#2+[#4*.0375]]
X[#1+[#3*.1471]] 
X[#1+[#3*.1875]] Y[#2+[#4*.0727]] 
X[#1+[#3*.1872]] Y[#2+[#4*.1152]] 
X[#1+[#3*.1480]] Y[#2+[#4*.1535]]
X[#1+[#3*.0672]] 
X[#1+[#3*.0346]] Y[#2+[#4*.1216]] 
G0 Z.1
o1006 endsub

; generate the number 7...
o1007 sub
G90 G0 X[#1+[#3*.0302]] Y[#2+[#4*.2609]]
G0 Z.02
M8
G1 Z-.01 F2. 
X[#1+[#3*.1863]] F30.
X[#1+[#3*.0714]] Y[#2+[#4*.0375]] 
G0 Z.1
o1007 endsub
 
; generate the number 8...
o1008 sub
G90 G0 X[#1+[#3*.0716]] Y[#2+[#4*.1549]]
G0 Z.02
M8
G1 Z-.01 F2. 
X[#1+[#3*.0453]] Y[#2+[#4*.1907]] F30.
X[#1+[#3*.0450]] Y[#2+[#4*.2276]]
X[#1+[#3*.0770]] Y[#2+[#4*.2609]]
X[#1+[#3*.1415]] 
X[#1+[#3*.1758]] Y[#2+[#4*.2271]] 
X[#1+[#3*.1760]] Y[#2+[#4*.1907]]
X[#1+[#3*.1484]] Y[#2+[#4*.1549]] 
X[#1+[#3*.0716]] 
X[#1+[#3*.0370]] Y[#2+[#4*.1124]]
Y[#2+[#4*.0711]] 
X[#1+[#3*.0712]] Y[#2+[#4*.0375]] 
X[#1+[#3*.1473]] 
X[#1+[#3*.1840]] Y[#2+[#4*.0711]]
Y[#2+[#4*.1131]] 
X[#1+[#3*.1484]] Y[#2+[#4*.1549]] 
G0 Z.1
o1008 endsub
 
; generate the number 9...
o1009 sub
G90 G0 X[#1+[#3*.1833]] Y[#2+[#4*.1808]] 
G0 Z.02
M8
G1 Z-.01 F2. 
X[#1+[#3*.1507]] Y[#2+[#4*.1488]] F30.
X[#1+[#3*.0699]] 
X[#1+[#3*.0307]] Y[#2+[#4*.1871]] 
X[#1+[#3*.0304]] Y[#2+[#4*.2296]] 
X[#1+[#3*.0663]] Y[#2+[#4*.2609]] 
X[#1+[#3*.1579]] 
X[#1+[#3*.1833]] Y[#2+[#4*.2359]] 
Y[#2+[#4*.1065]] 
X[#1+[#3*.1474]] Y[#2+[#4*.0375]] 
X[#1+[#3*.075]]
G0 Z.1
o1009 endsub


; distributor ........................
o0999 sub
    o0990 if [[#1] LT 1]
        o1000 call [#2] [#3] [#4] [#5]
    o0990 elseif [[#1] LT 2]
        o1001 call [#2] [#3] [#4] [#5]
    o0990 elseif [[#1] LT 3]
        o1002 call [#2] [#3] [#4] [#5]
    o0990 elseif [[#1] LT 4]
        o1003 call [#2] [#3] [#4] [#5]
    o0990 elseif [[#1] LT 5]
        o1004 call [#2] [#3] [#4] [#5]
    o0990 elseif [[#1] LT 6]
        o1005 call [#2] [#3] [#4] [#5]
    o0990 elseif [[#1] LT 7]
        o1006 call [#2] [#3] [#4] [#5]
    o0990 elseif [[#1] LT 8]
        o1007 call [#2] [#3] [#4] [#5]
    o0990 elseif [[#1] LT 9]
        o1008 call [#2] [#3] [#4] [#5]
    o0990 elseif [[#1] LT 10]
        o1009 call [#2] [#3] [#4] [#5]
    o0990 endif
o0999 endsub


#<firstDig> = 0
#<secondDig> = 0
#<thirdDig> = 0


; decompose number ...................
o900 if [#<_current_engraving_sn> LT 10]
    #<thirdDig> = #<_current_engraving_sn>
o900 elseif [#<_current_engraving_sn> LT 100]
    #<thirdDig> = [#<_current_engraving_sn> MOD 10]
    #<secondDig> = FIX[#<_current_engraving_sn> / 10]
o900 elseif [#<_current_engraving_sn> LT 1000]
    #<thirdDig> = [#<_current_engraving_sn> MOD 10]
    #<_current_engraving_sn> = FIX[#<_current_engraving_sn> / 10]
    #<secondDig> = [#<_current_engraving_sn> MOD 10]
    #<firstDig> = FIX[#<_current_engraving_sn> / 10]
o900 endif

;print statements will show up on (launch) terminal
(print, decomp firstDig is #<firstDig>)
(print, decomp secondDig is #<secondDig>)
(print, decomp thirdDig is #<thirdDig>)


; this works .. no indirection on sub calls ... 
o0999 call [#<firstDig>] [#<xOffset>] [0.1] [#<xScale>] [#<yScale>]
#<xOffset> = [#<xOffset> + [0.17 * #<xScale>]]
o0999 call [#<secondDig>] [#<xOffset>] [0.1] [#<xScale>] [#<yScale>]
#<xOffset> = [#<xOffset> + [0.17 * #<xScale>]]
o0999 call [#<thirdDig>] [#<xOffset>] [0.1] [#<xScale>] [#<yScale>]

; this DOES NOT work!! and it should .. no indirection on sub calls ... 
;o[#<secondDig>+1000] call [#<xOffset>] [0.1] [#<xScale>] [#<yScale>]

o<sn_engrave> endsub
